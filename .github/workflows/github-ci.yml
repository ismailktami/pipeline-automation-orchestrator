name: Tests CI
on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  TEST1:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v2
        with:
          repository: ismailktami/postmannewmanci
          path: postmannewmanci
    # INstall Node on the runner
      - name: Install Node
        uses: actions/setup-node@v1
        with:
          node-version: "12.x"
          
      - name: Test postman
        run: cat postmannewmanci/README.md  

  TEST2:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v2
        with:
          repository: ismailktami/robotframeworkdemo
          path: robotframeworkdemo

      - name: Prepare Python 3.8
        uses: actions/setup-python@v4
        with:
          python-version: '3.8' 
          
      - name: Test Python
        run: cat robotframeworkdemo/REDME.md


  TEARDOWN:
    runs-on: ubuntu-latest
    if: always()
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Test Save results
        run: |
          timestamp=$(date +"%Y-%m-%d_%H-%M-%S")
          mkdir -p executions
          touch tt.json
          cp tt.json  executions

      - name: Commit changes
        uses: EndBug/add-and-commit@v9
        with:
          author_name: Ismail Ktami
          author_email: ktamiismail@gmail.com
          message: 'add execution $timestamp'
          add: '.'